[python]
recipe = zc.recipe.egg
interpreter = python
eggs = ${buildout:eggs}

[scripts]
recipe = zc.recipe.egg:scripts
eggs = ${buildout:eggs}
dependent-scripts = true


[supervisor-cron]
recipe      = z3c.recipe.usercrontab
times       = @reboot
command     = ${buildout:bin-directory}/supervisord

[openerp]
recipe = anybox.recipe.openerp[bzr]:server
version = git https://github.com/Comunitea/OCB.git odoo MB_Depot
addons = ${settings:custom_addons}
         git git@github.com:Comunitea/Vertical-MB.git odoo_repos/vertical-mb master
         git https://github.com/Comunitea/openerp-sale-promotions.git odoo_repos/sale_promotions 8.0 group=promos
         git https://github.com/OCA/l10n-spain odoo_repos/l10n-spain 2d831c058826a325aac73191bf434e7133d1974b
         git https://github.com/OCA/partner-contact-management.git odoo_repos/partner-contac-management 55607d95920dda9f6c94fb3d9166cb2ab85bbd90
         git https://github.com/OCA/server-tools.git odoo_repos/server-tools e4429fc19ed1659e52cbef75bc82798e81dcddf3
         git https://github.com/OCA/account-financial-tools.git odoo_repos/account-financial-tools 503711e6629182f33de065d35e27ace1326368d5
         git https://github.com/OCA/bank-payment.git odoo_repos/bank-payment 469fc08fb8612b092854aba3fe05fcfdd39a3799
         git https://github.com/OCA/account-financial-reporting.git odoo_repos/account-financial-reporting ace1adcb3a6885aed4095f35a42fadfb38c9d658
         git https://github.com/OCA/reporting-engine.git odoo_repos/reporting-engine ae1ef0230214f0103b2ac0f0449228206dd8e116
         git https://github.com/OCA/web.git odoo_repos/oca-web d6a8d7c7866a297244b70b5da7993af3ebb8d781
         git https://github.com/OCA/purchase-workflow.git odoo_repos/purchase-workflow 274ba71ace8139d9bd1924155d9981aeccc6ad0e
         git https://github.com/Pexego/account-financial-tools.git odoo_repos/account-financial-tools-importers 8.0
         git https://github.com/OCA/bank-statement-import.git odoo_repos/bank-statement-import a1e7e10ef2267894b6dd9ab810e6b28a37da1157
         git https://github.com/OCA/account-payment.git odoo_repos/account-payment cf0c6543a491c9540b9694b814dadc9666340eb5
         git https://github.com/OCA/report-print-send.git odoo_repos/print_send 53116da5420864dccb52a975e4f2b15bf13cd85c
         git https://github.com/OCA/stock-logistics-workflow.git odoo_repos/stock-logistics-workflow.git 0cfc469c9185b73665da2516cd3e86ca3d8399b7
         git https://github.com/OCA/sale-workflow.git odoo_repos/sale-workflow 211b5f0719268ea0214f07370acd36e1018fb879
         local parts/odoo/addons/

eggs = unidecode
    ipdb
    pyPdf
    unicodecsv
    pycups
    twisted
    xlrd
    xlutils

options.db_host = ${settings:postgres_host}
options.db_name = ${settings:postgres_db_name}
options.admin_passwd = yRWLQHFi5qdjW-6zTppBRC
options.db_user = ${settings:postgres_user}
options.db_password = ${settings:postgres_password}
options.db_maxconn = ${settings:postgres_maxconn}
options.db_port = ${settings:postgres_port}
options.xmlrpc_port = ${settings:openerp_xmlrpc_port}
options.xmlrpcs_port = ${settings:openerp_xmlrpcs_port}
options.debug_mode = False
workers = 9

[env]
recipe = gocept.recipe.env

[static-analysis]
recipe = zc.recipe.egg
eggs = flake8

[supervisor]
recipe = collective.recipe.supervisor
port = ${settings:supervisor_port}
serverurl = ${settings:supervisor_url}:${supervisor:port}
programs =
    10 odoo ${buildout:directory}/bin/start_openerp
    20 scan ${buildout:directory}/odoo_repos/custom-apolo/scan_gun_server/scan_gun_server.py 

[py]
recipe = zc.recipe.egg
eggs = ${buildout:eggs}
interpreter = py
scripts = py

[initdb]
recipe = iw.recipe.cmd
on_install = true
on_update = true
cmds =
    echo ""
    echo "To start PosrgreSQL and Supervisord run:"
    echo "$ supervisord"
    echo ""
    echo "To create the database run:"
    echo "$ psql -d postgres -U odoo -c 'CREATE DATABASE ${openerp:options.db_name}'"
    echo ""
    echo "To shutdown Supervisord with all deamons:"
    echo "$ supervisorctl shutdown run:"
    echo ""
    echo "To Restart Postgres run:"
    echo "$ supervisorctl restart postgres"
    echo ""
    echo "To start OpenERP run:"
    echo "$ start_openerp"
    echo ""
    echo "Creating db"
